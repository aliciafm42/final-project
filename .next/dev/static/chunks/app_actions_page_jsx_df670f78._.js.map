{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/aliciamartinez/Downloads/Final/app/actions/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { useAuth } from \"@/context/AuthContext\";\n\nexport default function ActionsPage() {\n  const { user } = useAuth();\n  const [goals, setGoals] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(\"\");\n\n  // Fetch user's goals\n  const fetchGoals = async () => {\n    if (!user?.id) return;\n    setLoading(true);\n    setError(\"\");\n    try {\n      const res = await fetch(`/api/actions?userId=${user.id}`);\n      if (!res.ok) throw new Error(`Failed to fetch: ${res.statusText}`);\n      const data = await res.json();\n      // Ensure progress is always a number\n      const normalizedGoals = (data.goals || []).map(g => ({\n        ...g,\n        progress: g.progress ?? 0\n      }));\n      setGoals(normalizedGoals);\n    } catch (err) {\n      console.error(\"Error fetching goals:\", err);\n      setError(\"Failed to load goals. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add progress locally\n  const addProgressLocal = (goalId, increment) => {\n    const inc = Number(increment);\n    if (!inc || inc <= 0) return;\n\n    setGoals(prevGoals =>\n      prevGoals.map(g => {\n        if (g.id === goalId) {\n          const newProgress = Math.min((g.progress || 0) + inc, 10);\n          return { ...g, progress: newProgress };\n        }\n        return g;\n      })\n    );\n  };\n\n  useEffect(() => {\n    fetchGoals();\n  }, [user]);\n\n  // Not logged in UI\n  if (!user) {\n    return (\n      <div className=\"page-contain\" style={{ textAlign: \"center\" }}>\n        <h1>Set Your Eco Goals</h1>\n        <p>Start small, stay consistent, and watch your eco-friendly impact grow over time.</p>\n        <Link\n          href=\"/profile\"\n          className=\"green-button\"\n          style={{ marginTop: \"30px\", display: \"inline-block\" }}\n        >\n          Login or Register\n        </Link>\n      </div>\n    );\n  }\n\n  // Logged in UI\n  return (\n    <div style={{ padding: \"20px\" }}>\n      <h2>Your Eco-Friendly Goals</h2>\n      {loading && <p>Loading your goals...</p>}\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      {!loading && goals.length === 0 && <p>No goals yet. Add some in your profile!</p>}\n\n      <ul style={{ listStyle: \"none\", padding: 0, marginTop: \"20px\" }}>\n        {goals.map(goal => {\n          const progress = goal.progress ?? 0;\n          const maxAdd = 10 - progress;\n\n          return (\n            <li\n              key={goal.id}\n              style={{\n                backgroundColor: \"#DDF0D7\",\n                borderRadius: \"8px\",\n                padding: \"15px\",\n                marginBottom: \"15px\",\n              }}\n            >\n              <div style={{ display: \"flex\", alignItems: \"center\", gap: \"10px\" }}>\n                <span style={{ flex: 1 }}>{goal.text}</span>\n                <span>{progress}/10</span>\n\n                <input\n                  type=\"number\"\n                  min=\"1\"\n                  max={maxAdd.toString()}\n                  placeholder=\"Add number\"\n                  style={{ width: \"60px\", padding: \"5px\" }}\n                  onChange={e => {\n                    const val = Math.min(Number(e.target.value), maxAdd);\n                    if (val > 0) {\n                      addProgressLocal(goal.id, val);\n                      e.target.value = \"\";\n                    }\n                  }}\n                />\n              </div>\n\n              <div\n                style={{\n                  height: \"8px\",\n                  backgroundColor: \"#a8e6a1\",\n                  borderRadius: \"4px\",\n                  marginTop: \"10px\",\n                  overflow: \"hidden\",\n                }}\n              >\n                <div\n                  style={{\n                    width: `${(progress / 10) * 100}%`,\n                    height: \"100%\",\n                    backgroundColor: \"#2e8b57\",\n                    transition: \"width 0.3s\",\n                  }}\n                />\n              </div>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}